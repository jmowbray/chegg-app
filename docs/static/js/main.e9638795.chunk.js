(this["webpackJsonpchegg-app"]=this["webpackJsonpchegg-app"]||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n(7),a=n.n(s),i=n(6),o=n(14),c=n(18),u=n(4),d=n(13),l=function(e,t){var n={};return t&&(n.Authorization="token ".concat(t)),new Promise((function(t,r){fetch(e,{headers:n}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(e){return t(e)})).catch((function(e){return r(e)}))}))},p="jim-chegg-app-repoAndIssueOrder",j=function(){return localStorage.getItem(p)||localStorage.setItem(p,"{}"),JSON.parse(localStorage.getItem(p))},O=function(e,t){return e>t?-1:e<t?1:0},h=function(){return function(e,t){var n=t().app,r=n.org,s=n.apiToken;e({type:v.REPO_LOAD_REQUESTED,payload:{}}),function(e,t){return l("https://api.github.com/orgs/".concat(e,"/repos"),t)}(r,s).then((function(t){e({type:v.REPO_LOAD_SUCCEEDED,payload:{repos:t}})}),(function(t){e({type:v.REPO_LOAD_FAILED,payload:{errorMsg:t}})}))}},b=function(e){return function(t,n){var r=n().app,s=r.org,a=r.apiToken;t({type:v.ISSUES_LOAD_REQUESTED,payload:{repoName:e}}),function(e,t,n){return l("https://api.github.com/repos/".concat(e,"/").concat(t,"/issues"),n)}(s,e,a).then((function(n){var r,s=function(e){return j()[e]||{}}(e);n.sort((r=s,function(e,t){var n=r[e.id],s=r[t.id],a=void 0!==n,i=void 0!==s;return a&&i?n-s:a&&!i?-1:!a&&i?1:O(e.created_at,t.created_at)})),t({type:v.ISSUES_LOAD_SUCCEEDED,payload:{issues:n}},(function(e){t({type:v.ISSUES_LOAD_FAILED,payload:{errorMsg:e}})}))}))}},E=function(e,t){return function(n,r){n({type:v.ISSUES_REORDERED,payload:{oldIndex:e,newIndex:t}}),function(e,t){var n=e.map((function(e){return e.id})).reduce((function(e,t,n){return e[t]=n,e}),{}),r=j()||{};r[t]=n,localStorage.setItem(p,JSON.stringify(r))}(r().app.issues,r().app.selectedRepo)}},v={API_KEY_CHANGED:"API_KEY_CHANGED",ORG_INPUT_CHANGED:"ORG_INPUT_CHANGED",REPO_LOAD_REQUESTED:"REPO_LOAD_REQUESTED",REPO_LOAD_SUCCEEDED:"REPO_LOAD_SUCCEEDED",REPO_LOAD_FAILED:"REPO_LOAD_FAILED",ISSUES_LOAD_REQUESTED:"ISSUES_LOAD_REQUESTED",ISSUES_LOAD_SUCCEEDED:"ISSUES_LOAD_SUCCEEDED",ISSUES_LOAD_FAILED:"ISSUES_LOAD_FAILED",ISSUES_REORDERED:"ISSUES_REORDERED"},_={isLoaded:!1,isLoading:!1,apiToken:null,org:null,repos:[],selectedRepo:null,issues:[],errorMsg:null,issuesLoading:!1},f=function(e){return{name:e.name,issues:e.open_issues_count,owner:e.owner.login,ownerAvatarUrl:e.owner.avatar_url,id:e.id}},g=function(e){var t;return{avatar_url:e.avatar_url||(null===(t=e.assignee)||void 0===t?void 0:t.avatar_url),title:e.title,created_at:e.created_at,updated_at:e.updated_at,id:e.id}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.API_KEY_CHANGED:return Object(u.a)(Object(u.a)({},e),{},{apiToken:t.payload.apiToken});case v.ORG_INPUT_CHANGED:return Object(u.a)(Object(u.a)({},e),{},{org:t.payload.org});case v.REPO_LOAD_REQUESTED:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0,issues:[],selectedRepo:null,errorMsg:null});case v.REPO_LOAD_SUCCEEDED:var n=t.payload.repos,r=n.map(f);return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,repos:r,errorMsg:null});case v.REPO_LOAD_FAILED:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,repos:[],errorMsg:"Failed to load repositories for organization '".concat(e.org,"'")});case v.ISSUES_LOAD_REQUESTED:return Object(u.a)(Object(u.a)({},e),{},{selectedRepo:t.payload.repoName,issuesLoading:!0});case v.ISSUES_LOAD_SUCCEEDED:var s=t.payload.issues,a=s.map(g);return Object(u.a)(Object(u.a)({},e),{},{issues:a,issuesLoading:!1});case v.ISSUES_LOAD_FAILED:return Object(u.a)(Object(u.a)({},e),{},{errorMsg:"Failed to load issues",issuesLoading:!1});case v.ISSUES_REORDERED:var i=t.payload,o=i.oldIndex,c=i.newIndex;return Object(u.a)(Object(u.a)({},e),{},{issues:Object(d.c)(e.issues,o,c)});default:return e}},S=Object(o.b)({app:D});n(27);var x=n(8),m=n(9),y=n(11),R=n(10),I=(n(28),n(29),n(30),n(0)),L=function(e){Object(y.a)(n,e);var t=Object(R.a)(n);function n(){var e;Object(x.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).handleRepoClicked=function(t){var n=e.props.name;e.props.issuesLoadRequested(n)},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.issues,r=t===e.selectedRepo?"repository--selected":"repository";return Object(I.jsxs)("div",{className:r,onClick:this.handleRepoClicked,children:[Object(I.jsx)("div",{children:t}),Object(I.jsxs)("div",{className:"repository__issues",children:[Object(I.jsx)("svg",{viewBox:"0 0 16 16",version:"1.1",width:"16",height:"16","aria-hidden":"true",children:Object(I.jsx)("path",{fillRule:"evenodd",d:"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm9 3a1 1 0 11-2 0 1 1 0 012 0zm-.25-6.25a.75.75 0 00-1.5 0v3.5a.75.75 0 001.5 0v-3.5z"})}),Object(I.jsx)("div",{className:"repository__issues-count",children:n})]})]})}}]),n}(r.Component),A=Object(i.b)((function(e){return{selectedRepo:e.app.selectedRepo}}),(function(e){return{issuesLoadRequested:function(t){return e(b(t))}}}))(L),C=function(e){var t=e.repos;return e.selectedRepo&&0===t.length?Object(I.jsx)("div",{children:"No repositories for this organization. There may not be any, or you may be using an invalid API Token"}):Object(I.jsx)("div",{children:Object(I.jsx)("ul",{style:{listStyleType:"none"},children:t.map((function(e){return Object(I.jsx)("li",{children:Object(I.jsx)(A,Object(u.a)({},e))},e.name)}))})})},N=(n(32),function(e){var t=e.title,n=e.avatar_url,r=e.created_at,s=e.updated_at,a=new Date(r).toLocaleDateString("en-US"),i=function(e){var t=Math.floor((new Date-e)/1e3),n=t/31536e3;return n>1?Math.floor(n)+" years ago":(n=t/2592e3)>1?Math.floor(n)+" months ago":(n=t/86400)>1?Math.floor(n)+" days ago":(n=t/3600)>1?Math.floor(n)+" hours ago":(n=t/60)>1?Math.floor(n)+" minutes ago":Math.floor(t)+" seconds ago"}(new Date(s));return Object(I.jsxs)("div",{className:"issue",children:[Object(I.jsx)("div",{className:"issue__avatar",children:Object(I.jsx)("img",{src:n,alt:""})}),Object(I.jsxs)("div",{className:"issue__details",children:[Object(I.jsx)("div",{className:"issue__details-title",children:t}),Object(I.jsxs)("div",{className:"issue__details-times",children:[Object(I.jsxs)("div",{children:["Created: ",a]}),Object(I.jsxs)("div",{className:"issue__details-times-updated",children:["Updated: ",i]})]})]})]})}),U=Object(d.b)((function(e){var t=e.value;return Object(I.jsx)("li",{children:t})})),w=Object(d.a)((function(e){var t=e.items;return Object(I.jsx)("ul",{style:{listStyleType:"none"},children:t.map((function(e,t){return Object(I.jsx)(U,{index:t,value:e},"item-".concat(e.props.id))}))})})),T=function(e){Object(y.a)(n,e);var t=Object(R.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.issues,n=e.isLoading,r=e.repoName,s=e.issuesReordered;if(n)return Object(I.jsx)("div",{children:"Loading..."});if(r&&t&&0===t.length)return Object(I.jsx)("div",{children:"No issues for this repository."});var a=t.map((function(e){return Object(I.jsx)(N,Object(u.a)({},e))}));return Object(I.jsxs)("div",{children:[Object(I.jsxs)("div",{children:["Viewing issues for repo '",r,"'. Drag and drop to reorder."]}),Object(I.jsx)(w,{items:a,onSortEnd:s})]})}}]),n}(r.Component),k=Object(i.b)((function(e){return{issues:e.app.issues,isLoading:e.app.issuesLoading,repoName:e.app.selectedRepo}}),(function(e,t){return{issuesReordered:function(t){var n=t.oldIndex,r=t.newIndex;e(E(n,r))}}}))(T),P=(n(33),function(e){var t=e.repos,n=e.selectedRepo;return Object(I.jsxs)("div",{className:"repo-issue-browser",children:[Object(I.jsx)("div",{className:"repo-issue-browser__repos",children:Object(I.jsx)(C,{repos:t,selectedRepo:n})}),Object(I.jsx)("div",{className:"repo-issue-browser__issues",children:n?Object(I.jsx)(k,{}):Object(I.jsx)("div",{children:"Load/Select a repository to see the associated issues"})})]})}),M=function(e){return Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{children:e.title}),Object(I.jsx)("input",{style:e.styles,type:"text",value:e.value,onInput:e.inputHandler})]})},G=(n(34),function(e){Object(y.a)(n,e);var t=Object(R.a)(n);function n(){var e;Object(x.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).handleApiTokenInputChanged=function(t){e.props.apiTokenInputChanged(t.target.value)},e.handleOrgInputChanged=function(t){e.props.orgInputChanged(t.target.value)},e}return Object(m.a)(n,[{key:"render",value:function(){return Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{className:"directions",children:'Enter an Organization (required) and an API Token (optional) then click "Load Repositories" to load repositories.'}),Object(I.jsxs)("div",{className:"header-controls",children:[Object(I.jsx)("div",{children:Object(I.jsx)(M,{styles:{width:"100%"},inputHandler:this.handleOrgInputChanged,title:"Organization (IE: 'reactjs')"})}),Object(I.jsx)("div",{children:Object(I.jsx)(M,{styles:{width:"100%"},inputHandler:this.handleApiTokenInputChanged,title:"API Token"})}),Object(I.jsx)("div",{className:"header-controls__button",children:Object(I.jsx)("button",{onClick:this.props.repoLoadRequested,children:"Load Repositories"})})]})]})}}]),n}(r.Component)),H=Object(i.b)((function(e){return{}}),(function(e){return{apiTokenInputChanged:function(t){return e(function(e){return function(t){t({type:v.API_KEY_CHANGED,payload:{apiToken:e}})}}(t))},orgInputChanged:function(t){return e(function(e){return function(t){t({type:v.ORG_INPUT_CHANGED,payload:{org:e}})}}(t))},repoLoadRequested:function(){return e(h())}}}))(G),F=function(e){Object(y.a)(n,e);var t=Object(R.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"renderRepoIssueBrowser",value:function(){var e=this.props.app,t=e.repos,n=e.selectedRepo,r=e.issues,s=e.isLoading,a=e.errorMsg,i=e.issuesLoading;return a?Object(I.jsx)("div",{style:{marginTop:"25px"},children:a}):s?Object(I.jsx)("div",{style:{marginTop:"25px"},children:"Loading..."}):t?Object(I.jsx)(P,{repos:t,issues:r,selectedRepo:n,issuesLoading:i}):null}},{key:"render",value:function(){return Object(I.jsxs)("div",{className:"App",children:[Object(I.jsx)("div",{className:"header",children:Object(I.jsx)("h1",{children:"GitHub Repository Issue Manager"})}),Object(I.jsx)("div",{className:"app-wrapper",children:Object(I.jsxs)("div",{className:"app-main",children:[Object(I.jsx)(H,{}),Object(I.jsx)("div",{className:"repo-issue-browser-wrapper",children:this.renderRepoIssueBrowser()})]})}),Object(I.jsx)("div",{className:"footer"})]})}}]),n}(r.Component),z=Object(i.b)((function(e){return Object(u.a)({},e)}),(function(e){return{}}))(F);a.a.render(Object(I.jsx)(i.a,{store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.c)(S,e,Object(o.a)(c.a))}(),children:Object(I.jsx)(z,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.e9638795.chunk.js.map